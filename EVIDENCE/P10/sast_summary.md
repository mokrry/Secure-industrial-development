# P10 - SAST & Secrets summary

## 1. SAST (Semgrep)

- Инструмент: Semgrep (docker image `returntocorp/semgrep:latest`).
- Профиль правил:
  - базовый профиль `p/ci` для CI-проверок;
  - дополнительные локальные правила из `security/semgrep/rules.yml`.
- Формат отчёта: SARIF (`EVIDENCE/P10/semgrep.sarif`).
- Результаты текущего запуска:
  - Findings: 0 (в отчёте по сути только пустой список результатов).
  - Блокирующих проблем нет.

Вывод: на текущем состоянии кода Semgrep не нашёл уязвимостей по подключённым профилям. Semgrep оставлен частью CI и будет запускаться при дальнейших изменениях кода.

---

## 2. Сканирование секретов (Gitleaks)

- Инструмент: Gitleaks (docker image `zricethezav/gitleaks:latest`).
- Конфигурация: `security/.gitleaks.toml`
  - используется базовый набор встроенных правил;
  - добавлен минимум в allowlist (игнор артефактов и служебных директорий: `EVIDENCE/`, `.pytest_cache/`, `.idea/`).
- Объект сканирования: текущая рабочая копия репозитория (`--source=/repo`), без истории коммитов.
- Формат отчёта: JSON (`EVIDENCE/P10/gitleaks.json`).
- Результаты текущего запуска:
  - Findings: 0 (отчёт содержит только `[]`, в логах Gitleaks — `no leaks found`).
  - Подозрительных секретов не обнаружено.

Вывод: в текущем состоянии репозитория Gitleaks не нашёл утечек секретов по стандартным правилам.

---

## 3. Дальнейшие действия

- Semgrep и Gitleaks интегрированы в CI через workflow `.github/workflows/ci-sast-secrets.yml` и будут запускаться при изменениях кода и security-конфигов.
- В случае появления findings:
  - реальные уязвимости и секреты планируется исправлять и выносить из кода (секреты — в переменные окружения/CI secrets);
  - ложноположительные срабатывания будут аккуратно добавляться в allowlist `security/.gitleaks.toml` с комментариями.
